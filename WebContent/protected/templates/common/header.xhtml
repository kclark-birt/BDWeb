<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets" 
	  xmlns:h="http://java.sun.com/jsf/html" 
	  xmlns:b="http://bootsfaces.net/ui" 
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:pe="http://primefaces.org/ui/extensions">

<body>
    <ui:composition>
<h:form>     

	<p:dialog header="New Data Source" widgetVar="dialogNewDataSource" minHeight="40" styleClass="dataExplorer">
		<p:wizard flowListener="#{newDataSourceBean.onFlowProcess}">
			<p:tab id="selectODA" title="Choose an ODA">
				<p:messages />
				<p:inputText value="#{newDataSourceBean.driverName}" required="true"/> <br/>
				<p:selectOneMenu id="ODA" value="#{newDataSourceBean.driverClass}" required="true">
					<f:selectItem itemLabel="Select an ODA" itemValue=""/>
					<f:selectItem itemLabel="Classic Modules Inc. Sample Database" itemValue="org.eclipse.birt.report.data.oda.jdbc"/>
					<f:selectItem itemLabel="Excel Data Source" itemValue="org.eclipse.birt.report.data.oda.excel"/>
					<f:selectItem itemLabel="Flat File Data Source" itemValue="org.eclipse.datatools.connectivity.oda.flatfile"/>
					<f:selectItem itemLabel="Hive Data Source" itemValue="org.apache.hive.jdbc.HiveDriver"/>
					<f:selectItem itemLabel="JDBC Data Source" itemValue="JDBC"/>
					<f:selectItem itemLabel="MongoDB Data Source" itemValue="MONGO"/>
					<f:selectItem itemLabel="POJO Data Source" itemValue="POJO"/>
					<f:selectItem itemLabel="Scripted Data Source" itemValue="SCRIPTED"/>
					<f:selectItem itemLabel="Web Services Data Source" itemValue="org.eclipse.datatools.enablement.oda.ws"/>
					<f:selectItem itemLabel="XML Data Source" itemValue="org.eclipse.datatools.enablement.oda.xml"/>
				</p:selectOneMenu>
			</p:tab>
			
			<p:tab id="connectionProperties" title="Enter connection properties">
				<p:panelGrid columns="2">
					<h:outputText value="Username"/>
					<p:inputText value="#{newDataSourceBean.username}" />
					<h:outputText value="Password"/>
					<p:password value="#{newDataSourceBean.password}"/>
					<h:outputText value="Database URL" />
					<p:inputText value="#{newDataSourceBean.url}" />
				</p:panelGrid>
			</p:tab>
			
			<p:tab id="reviewODA" title="Review Data Source">
				<p:panelGrid columns="2">
					<h:outputText value="Data Source Name" />
					<h:outputText value="#{newDataSourceBean.driverName}" />
					<h:outputText value="Data Source Driver Class" />
					<h:outputText value="#{newDataSourceBean.driverClass}" />
					<p:commandButton value="Test Connection" />
					<p:commandButton value="Save" 
									 ajax="false" 
									 action="#{birtEngine.createDataSource()}"  
									 process="@this"/>
				</p:panelGrid>
			</p:tab>
		</p:wizard>	
	</p:dialog>
	
	<p:dialog header="New Data Set" widgetVar="dialogNewDataSet" minHeight="40" styleClass="dataExplorer">
		<p:wizard>
			<p:tab id="newDataSet1" title="Select a Data Source">
				<p:panelGrid columns="2">
					<h:outputText value="Select Data Source" />
					<p:selectOneMenu value="#{birtEngine.selectedDataSource}">
						<f:selectItems  value="#{birtEngine.availableDataSources}"/>
					</p:selectOneMenu>
				</p:panelGrid>	
			</p:tab>
			
			<p:tab id="newDataSet2" title="Name your Data Set">
				<p:panelGrid columns="2">
					<h:outputText value="Data Set Name" />
					<p:inputText value="#{newDataSetBean.dataSetName}"/>
				</p:panelGrid>				
			</p:tab>
			
			<p:tab id="newDataSet3" title="Write or paste your query">
				<p:panelGrid columns="1">
					<pe:codeMirror id="xmlArea" mode="xml" theme="eclipse" lineNumbers="true" value="#{newDataSetBean.query}" />
					<p:commandButton value="Save" 
									 ajax="false" 
									 action="#{birtEngine.createDataSet()}"  
									 process="@this"/>
				</p:panelGrid>	
			</p:tab>
		</p:wizard>
	</p:dialog>
	
	<p:dialog header="New Data Cube" widgetVar="dialogNewDataCube" minHeight="40" styleClass="dataExplorer">	
	</p:dialog>
	
	<p:dialog header="New Report Parameter" widgetVar="dialogNewReportParameter" minHeight="40" styleClass="dataExplorer">	
	</p:dialog>
	
	<p:dialog header="New Variable" widgetVar="dialogNewVariable" minHeight="40" styleClass="dataExplorer">	
	</p:dialog>
	
	<p:dialog header="Upload Resource" widgetVar="dialogUploadResource" minHeight="40" styleClass="dataExplorer">
		<p:growl id="uploadMessages" showDetail="true" />
		<p:fileUpload value="#{fileUploadView.file}" mode="simple" skinSimple="true"/>
		<p:commandButton value="Submit" ajax="false" actionListener="#{fileUploadView.upload}" disabled="true" />	
	</p:dialog>

	<p:dialog header="Data Explorer" widgetVar="dialogDataExplorer" minHeight="40" styleClass="dataExplorer">
		<p:accordionPanel multiple="true">
			<p:tab title="Data Sources">
				<p:panelGrid columns="1">
					<p:commandLink value="Create a Data Source" onclick="PF('dialogNewDataSource').show();" /> <br/>
					
					<p:panelGrid columns="2">
						<f:facet name="header">
							<h:outputText value="Available Data Sources" /><br/>
							<p:selectOneMenu value="#{birtEngine.selectedDataSource}">
								<f:selectItems  value="#{birtEngine.availableDataSources}"/>
							</p:selectOneMenu>
						</f:facet>
						<p:commandButton value="Edit"/>
						<p:commandButton value="Delete" ajax="false" action="${birtEngine.deleteDataSource()}"/>
					</p:panelGrid>
				</p:panelGrid>
			</p:tab>
			
			<p:tab title="Data Sets">
				<p:commandLink value="Create a Data Set" onclick="PF('dialogNewDataSet').show();"/>
			</p:tab>
			
			<p:tab title="Data Cubes">
				<p:commandLink value="Create a Data Cube" onclick="PF('dialogNewDataCube').show();" />
			</p:tab>
			
			<p:tab title="Report Parameters">
				<p:commandLink value="Create a Report Parameter" onclick="PF('dialogNewReportParameter').show();" />
			</p:tab>
			
			<p:tab title="Variables">
				<p:commandLink value="Create a Variable" onclick="PF('dialogNewVariable').show();"/>
			</p:tab>
		</p:accordionPanel>
	</p:dialog>

	<p:dialog header="Palette" widgetVar="dialogPalette" minHeight="40" styleClass="paletteContainer">
    	<p:panelGrid columns="2">
    		<p:button  value="Label" 				icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Text" 				icon="ui-icon-star" styleClass="paletteButton"/>    		
    		<p:button  value="Dynamic Text" 		icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Data" 				icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Image" 				icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Grid"		 			icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="List" 				icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Table"		 		icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Chart" 				icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Cross Tab" 			icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Aggregation" 			icon="ui-icon-star" styleClass="paletteButton" />
    		<p:button  value="Relative Time Period" icon="ui-icon-star" styleClass="paletteButton" />
    	</p:panelGrid>
	</p:dialog>

	<p:dialog header="About" widgetVar="dialogAbout" minHeight="40" styleClass="about">
		<p:panelGrid columns="2">
			<h:outputText value="Author" />
			<h:outputText value="Kristopher Clark" />
			<h:outputText value="Build" />
			<h:outputText value="${propertiesBean.buildNumber}" />
			<h:outputText value="Source" />
			<h:outputLink value="https://github.com/kclark-birt/BDWeb">Github</h:outputLink>
		</p:panelGrid>
	</p:dialog>

	<p:dialog header="Resources" widgetVar="dialogResources" minHeight="40" styleClass="resourceDialog">
		<p:accordionPanel multiple="false">
			<p:tab title="Shared Resources">
				<p:commandLink value="Upload Resources" onclick="PF('dialogUploadResource').show();"/>
			</p:tab>
		</p:accordionPanel>
	</p:dialog>

    <p:growl id="messages" showDetail="true" />
 
    <p:toolbar>
        <f:facet name="left">
            <p:commandButton type="button" value="New" icon="ui-icon-document" />
 
            <p:commandButton type="button" value="Open" icon="ui-icon-folder-open" />

            <span class="ui-separator">
                <span class="ui-icon ui-icon-grip-dotted-vertical" />
            </span>
            
            <p:commandButton type="button" value="Data Explorer" onclick="PF('dialogDataExplorer').show();" icon="ui-icon-folder-open" />
            <p:commandButton type="button" value="Palette" 		 onclick="PF('dialogPalette').show();" icon="ui-icon-folder-open" />
            <p:commandButton type="button" value="Resources"	 onclick="PF('dialogResources').show();" icon="ui-icon-folder-open" />
 
            <span class="ui-separator">
                <span class="ui-icon ui-icon-grip-dotted-vertical" />
            </span>
 
            <p:commandButton type="button" title="Save" icon="ui-icon-disk" />
            <p:commandButton type="button" title="Delete" icon="ui-icon-trash" />
            <p:commandButton type="button" title="Print" icon="ui-icon-print" />
        </f:facet>
 
        <f:facet name="right">
            <p:menuButton value="Options">
                <p:menuitem value="Save" actionListener="#{toolbarView.save}" update="messages" icon="ui-icon-disk" />
                <p:menuitem value="Update" actionListener="#{toolbarView.update}" update="messages" icon="ui-icon-arrowrefresh-1-w" />
                <p:menuitem value="Delete" actionListener="#{toolbarView.delete}" ajax="false" icon="ui-icon-close" />
                <p:menuitem value="Homepage" url="http://www.primefaces.org" icon="ui-icon-extlink" />
            </p:menuButton>
        </f:facet>

        <f:facet name="right">
            <p:menuButton value="Help">
                <p:menuitem value="BIRT Developer Center"  	url="http://developer.actuate.com/" />
                <p:menuitem value="JavaScript API" 			url="http://developer.actuate.com/be/documentation/Manualsihub2/using-jsapi.pdf" />
                <p:menuitem value="REST API" 				url="http://restapitest.actuate.com:5000/ihub/v1/ihubrestdocs/" />
                <p:menuitem value="About"	 				url="#" onclick="PF('dialogAbout').show();" />
            </p:menuButton>
        </f:facet> 
    </p:toolbar>
</h:form>
    </ui:composition>
</body>

</html>